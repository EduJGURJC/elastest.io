--- 
layout: default 
title: Elastest Documentation - Custom metrics 
active: documentation 
section-title: Documentation 
section-icon: mdi mdi-content-copy 
---
<script src="/js/jquery-3.1.1.min.js"></script>
<script src="/js/float-panel.js"></script>

<script type="text/javascript">
	/* Import docs theme css */
	$('head').append('<link rel="stylesheet" type="text/css" href="/css/theme_extra.css">');
	

	$( document).ready(function(){
		$('#menu-list').show();
	    $('li.subnav_drop').find('ul.subnav').hide();
	       $( ".subnav" ).find( "li:contains('Custom metrics')" ).each(function(i,e){
		  var currentElement = $(e);
		  currentElement.parent().css({"display":"block","visibility":"visible"}); //css("background-color","blue");
		  currentElement.css({"display":"block","visibility":"visible"});
	       });
	    $('li.subnav_drop').click(function(i,e) {  
	      $('li.subnav_drop').not(this).find('ul.subnav').hide();
	      $(this).find('ul.subnav').toggle();
	    }); 

	    var minHeight = $('#float-panel').outerHeight() + 100;	
						$('#doc-container').css('min-height', minHeight+'px');
	});
	   
	$( ".wy-nav-content" ).find( "li:contains('Custom metrics')" ).css('color','red');
 </script>

<div id="doc-container" class="container text-justify">
  <div class="holder range"> 
        <div id="float-panel" class="wy-grid-for-nav cell-xs-3 cell-md-3 cell-lg-2 float-panel" data-top="56">

          
          <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
            <div class="wy-menu wy-menu-vertical" role="navigation" aria-label="main navigation">
		<div id="site-menu-title">
			<h3 class="h5">Explore docs</h3>
			<hr class="divider hr-lg-left-0 bg-orange">    
		</div>
		<ul id="menu-list" class="current" hidden>
			
				
					<li><ul> 

    <li class="toctree-l1 ">
        <a class="" href="../..">What is ElasTest?</a>
        
    </li>

</ul></li>
				
			
				
					<li><ul> 
    
   
    <li class="subnav_drop"><span>Tutorials</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../getting-started/">Getting started</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../e2e-testing/">E2E Testing in ElasTest</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../using-browsers-in-elastest/">Using browsers in ElasTest</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../using-eds-devices-for-iot/">Using EDS devices for IoT</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../using-ems-to-build-tests-with-dynamic-info/">Using EMS to build tests with dynamic info</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../using-ess-to-perform-security-checks/">Using ESS to perform security checks</a>
        
    </li>


        
             

    <li class="toctree-l1 current">
        <a class="current" href="./">Custom metrics</a>
        
         
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../kubernetes/">Kubernetes</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../ere-with-custom-code/">ERE with custom code</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../using-ebs-to-perform-analytics/">Using EBS to perform analytics</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../estimating-the-costs-of-tests-on-aws/">Estimating the costs of tests on AWS</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../observability-for-5g-infrastructures/">Observability for 5G infrastructures</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../ems/">EMS (show how specific visualizations for TJobs and ElasTest TSS work)</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../qoe/">Measuring video quality for video streaming applications</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../eoe/">Orchestration testing</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
				
			
				
					<li><ul> 
    
   
    <li class="subnav_drop"><span>Demos</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../../demos/api-testing/">API testing</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../demos/e2e-testing/">E2E testing</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../demos/functional-exploratory-testing/">Functional / Exploratory testing</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../demos/multi-configuration/">Multi-configuration</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../demos/load-testing-with-aws/">Load testing with AWS</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../demos/cross-browser-testing/">Cross browser testing</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../demos/security-testing/">Security testing</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../demos/chaos-testing/">Chaos testing</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../demos/qoe/">QoE testing</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../demos/test-recommendation/">Test recommendation</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../demos/test-cost-estimation/">Test cost estimation</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
				
			
				
					<li><ul> 
    
   
    <li class="subnav_drop"><span>Cheatsheet</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../../try-elastest/">Try ElasTest</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../testing/unit/">Run unit tests</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../testing/e2e-rest/">Run end2end tests</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../testing/sut/">Software under Test</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../testing/parameterized-tests/">Parameterized tests</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../testing/multi-configuration-tjobs/">Multi-Configuration TJobs</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../web-browsers/manual-browsers/">Launching Web Browsers on ElasTest</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../web-browsers/e2e-browser/">Run en2end tests with Web Browsers</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../web-browsers/outside-testing/">Testing with Web Browsers from outside ElasTest</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../log-analyzer/">Log Analyzer</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../executions-comparator/">Executions Comparator</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../testlink/">TestLink with ElasTest</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../monitoring/">Test Monitoring</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../monitoring/outside-elastest/">Monitoring outside Elastest</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../monitoring/custom/">Custom monitoring</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../jenkins/pipeline/">Pipeline Jobs</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../jenkins/freestyle/">Freestyle Jobs</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../roadmap/">Roadmap</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
				
			
				
					<li><ul> 
    
   
    <li class="subnav_drop"><span>Reference documentation</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../../testing/environment-variables/">Enviroment variables</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../test-services/ems/">Elastest Monitoring Service (EMS)</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../test-services/ece/">Elastest Cost Engine (ECE)</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../test-services/ere-trial/">Elastest Recommendation Egine (ERE)</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../test-services/ebs/">ElasTest BigData Service (EBS)</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../test-services/eds/">ElasTest Device impersonation Service (EDS - IoT)</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../test-services/ess/">ElasTest Security Service (ESS)</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
				
			
				
					<li><ul> 
    
   
    <li class="subnav_drop"><span>Deployment</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../../deploying/ubuntu/">Linux Server</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../deploying/aws/">Amazon Web Services</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../deploying/kubernetes/">Kubernetes</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
				
			
				
					<li><ul> 
    
   
    <li class="subnav_drop"><span>Management</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../../elastest-monitoring/">Monitoring ElasTest</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../manage-elastest/monitoring-containers/">Monitoring containers</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../manage-elastest/manage-elasticsearch/">Monitoring ElasticSearch</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
				
			
				
					<li><ul> 

    <li class="toctree-l1 ">
        <a class="" href="../../releases/">Releases</a>
        
    </li>

</ul></li>
				
			
				
					<li><ul> 

    <li class="toctree-l1 ">
        <a class="" href="../../support/">Support</a>
        
    </li>

</ul></li>
				
			
		</ul>
            </div>
            &nbsp;
          </nav>
        </div>

	<section class="section-sm-41">
		<div class="shell">
		    <div class="range range-xs-right">
		        <div class="cell-xs-10 cell-sm-8 cell-md-9 cell-lg-10 cell-xl-12 text-md-left cell-lg-push-1 offset-lg-top-0">
			  
				<div class="wy-nav-content">
				  <div class="rst-content">
				   
				    <div role="main">
				      <div class="section">
					
					  <div class="range range-xs-left">
<div class="cell-xs-10 cell-lg-6 text-md-left inset-md-right-80 cell-lg-push-1 offset-top-50 offset-lg-top-0">
<h2 id="content" class="h1">Custom metrics</h2>
<div class="offset-top-30 offset-md-top-30">
</div>
</div>
</div>

<p>ElasTest automatically gathers metrics and logs from all TJobs and from all SuTs deployed by the platform itself (dockerized SuTs), as explained <a href="../../monitoring/">here</a>. And ElasTest allows configuring already deployed SuTs for sending metrics and logs thanks to Beats technology, as explained <a href="../../monitoring/outside-elastest/">here</a>. But what if you want to send some custom information to ElasTest to be shown or graphed during a TJob execution? For example:</p>
<ul>
<li>If your SuT is a web application, the code in your TJob can send the number of users connecting to it as it executes so you can compare it with the CPU consumption or memory usage of the SuT.</li>
<li>If you are interested in a specific metric of your SuT for which there's no Beat agent available (<a href="https://www.elastic.co/products/beats">official agents</a> or <a href="https://www.elastic.co/guide/en/beats/libbeat/current/community-beats.html">community agents</a>), you can always send it through http.</li>
</ul>
<p>For this reason, ElasTest allows users to send any log or metric through http requests.</p>
<h4 id="send-metrics-with-http" class="holder-subtitle link-top">Send metrics with HTTP</h4>

<p>You can send to ElasTest metric information with http requests from any TJob or any SuT.</p>
<h5 class="small-subtitle">IP of http request in a TJob or a SuT deployed by ElasTest</h5>

<p>Value of environment variable <em><code>ET_MON_LSHTTP_API</code></em>.</p>
<h5 class="small-subtitle">IP of http request in a SuT deployed outside ElasTest</h5>

<p>The URL can be built with <strong>HTTP Api Url</strong> param, available from the SuT information page:</p>
<div class="docs-gallery more-margin-top inline-block">
    <a data-fancybox="gallery-2" href="/docs/monitoring/images/logstash_ip.png"><img class="img-responsive img-wellcome" src="/docs/monitoring/images/logstash_ip.png"/></a>
</div>

<p>For to the image above, the URL where to send the post requests would be:</p>
<pre><code class="text">http://172.18.0.11:80/logstash/
</code></pre>

<p><br></p>
<p>The request has to use the POST method. There are different formats to send different types of information:</p>
<h5 class="small-subtitle">Send one log entry in one request</h5>

<pre><code class="json">{
   &quot;@timestamp&quot;: 9999999999,
   &quot;exec&quot;: &quot;XX&quot;,
   &quot;component&quot;: &quot;YY&quot;,
   &quot;stream&quot;: &quot;ZZ&quot;,
   &quot;message&quot;: &quot;Complete log message entry&quot;
}
</code></pre>

<div style="margin-top: 20px"></div>

<ul>
<li><strong>@timestamp</strong>: is optional and contains the timestamp when event was generated.</li>
<li><strong>exec</strong>: The value of <strong>Exec ID</strong> shown in ElasTest dashboard for SuTs deployed outside ElasTest or the value of <code>ET_MON_EXEC</code> environment variable for TJobs or SuTs deployed by ElasTest.</li>
<li><strong>component</strong>: <code>sut</code> for http requests sent from the SuT and <code>test</code> for http requests sent from the TJob.</li>
<li><strong>stream</strong>: Used to distinguish several logs from the same component. In this case only one log exists for the component, its value is usually "default_log".</li>
<li><strong>message</strong>: Complete log message entry.</li>
</ul>
<h5 class="small-subtitle">Send several log entries in one request</h5>

<pre><code class="json">{
   &quot;@timestamp&quot;: 9999999999,
   &quot;exec&quot;: &quot;XX&quot;,
   &quot;component&quot;: &quot;YY&quot;,
   &quot;stream&quot;: &quot;ZZ&quot;,
   &quot;messages&quot;: [
      &quot;Complete log message entry 1&quot;,
      &quot;Complete log message entry 2&quot;,
      &quot;Complete log message entry 3&quot;,
      &quot;Complete log message entry 4&quot;
   ]
}
</code></pre>

<h5 class="small-subtitle">Send one atomic metric in one request</h5>

<pre><code class="json">{
   &quot;@timestamp&quot;: 9999999999,
   &quot;exec&quot;: &quot;XX&quot;,
   &quot;component&quot;: &quot;YY&quot;,
   &quot;stream&quot;: &quot;cpu_usage&quot;,
   &quot;stream_type&quot;: &quot;atomic_metric&quot;,
   &quot;cpu_usage&quot;: 80,
   &quot;unit&quot;: &quot;%&quot;
}
</code></pre>

<div style="margin-top: 20px"></div>

<ul>
<li><strong>stream</strong> field can be whatever you want (it has to be used below when setting the numeric value)</li>
</ul>
<h5 class="small-subtitle">Send one composed metric in one request</h5>

<pre><code class="json">{
   &quot;@timestamp&quot;: 9999999999,
   &quot;exec&quot;: &quot;XX&quot;,
   &quot;component&quot;: &quot;YY&quot;,
   &quot;et_type&quot;: &quot;cpu&quot;,
   &quot;stream_type&quot;: &quot;composed_metric&quot;,
   &quot;cpu&quot;: {
     &quot;total_usage&quot;: 80,
     &quot;max_usage&quot;: 100
   },
   &quot;units&quot;: {
     &quot;total_usage&quot;: &quot;%&quot;,
     &quot;max_usage&quot;: &quot;%&quot;
   }
}
</code></pre>

<h4 id="send-metrics-with-http" class="holder-subtitle link-top">Creating a TJob with metrics recollection</h4>

<h5 class="small-subtitle">Test <i class="fab fa-java"></i></h5>

<pre><code class="java">public class CustomMetrics extends ElasTestBase {

    protected static final Logger logger = getLogger(lookup().lookupClass());

    protected static String urlLogstash;
    protected static String execId;
    protected static String containerName;
    protected static String counterStr;
    protected static OperatingSystemMXBean osBean;
    protected static boolean credentials = false;
    protected static String username;
    protected static String password;

    @BeforeAll
    public static void setupClass() {
        osBean = ManagementFactory.getPlatformMXBean(OperatingSystemMXBean.class);

        counterStr = System.getenv(&quot;COUNTER&quot;);
        urlLogstash = System.getenv(&quot;ET_MON_LSHTTP_API&quot;);
        execId = System.getenv(&quot;ET_MON_EXEC&quot;);
        username = System.getenv(&quot;CREDENTIALS_NAME&quot;);
        password = System.getenv(&quot;CREDENTIALS_PASS&quot;);

        if (username != null &amp;&amp; password != null) {
            credentials = true;
            logger.info(&quot;Logstash with credentials&quot;);
        } else {
            logger.info(&quot;Logstash without credentials&quot;);
        }

        if (counterStr == null) {
            counterStr = &quot;10&quot;;
        }

        logger.info(&quot;\n-Logstash Ip: &quot; + urlLogstash + &quot;\n-Execution Identifier: &quot; + execId + &quot;\n-Generate &quot;
                + counterStr + &quot; prime numbers&quot;);
    }

    @Test
    public void test() {
        int counter = Integer.parseInt(counterStr);

        while (counter &gt;= 0) {
            BigInteger prime = BigInteger.probablePrime(1024, new Random()); // Stress CPU

            logger.info(&quot;Generate prime number: &quot; + prime.toString());

            double javaCpu = osBean.getProcessCpuLoad() * 100;
            double totalCpu = osBean.getSystemCpuLoad() * 100;

            try {
                sendPostToLogstash(generateMetric(&quot;component1&quot;, &quot;use_cpu&quot;, javaCpu, &quot;Java_usage_CPU&quot;, &quot;%&quot;, totalCpu,
                        &quot;Total_usage_CPU&quot;, &quot;%&quot;));
            } catch (Exception e) {
                logger.info(&quot;Error when send information to logstash&quot;);
                e.printStackTrace();
            }

            sleep(5000);
            counter--;
        }
    }

    public String generateMetric(String component, String stream, double v1, String s1, String u1, double v2, String s2,
            String u2) {
        String trace = &quot;{&quot; + &quot;\&quot;&quot; + s1 + &quot;\&quot;: &quot; + v1 + &quot;,&quot; + &quot;\&quot;&quot; + s2 + &quot;\&quot;: &quot; + v2 + &quot;&quot; + &quot;}&quot;;

        String units = &quot;{&quot; + &quot;\&quot;&quot; + s1 + &quot;\&quot;:\&quot;&quot; + u1 + &quot;\&quot;,&quot; + &quot;\&quot;&quot; + s2 + &quot;\&quot;:\&quot;&quot; + u2 + &quot;\&quot;&quot; + &quot;}&quot;;

        String body = &quot;{&quot; + &quot;\&quot;et_type\&quot;:\&quot;composed_example\&quot;&quot; + &quot;,\&quot;component\&quot;:\&quot;&quot; + component + &quot;\&quot;&quot; + &quot;,\&quot;exec\&quot;:\&quot;&quot;
                + execId + &quot;\&quot;&quot; + &quot;,\&quot;stream\&quot;:\&quot;custom_metric\&quot;&quot; + &quot;,\&quot;stream_type\&quot;:\&quot;composed_metrics\&quot;&quot;
                + &quot;,\&quot;composed_example\&quot;: &quot; + trace + &quot;,\&quot;units\&quot;: &quot; + units + &quot;}&quot;;

        return body;
    }

    public void sendPostToLogstash(String body) throws Exception {
        URL url = new URL(urlLogstash);

        URLConnection con = url.openConnection();
        HttpURLConnection http = (HttpURLConnection) con;
        http.setRequestMethod(&quot;POST&quot;);
        http.setDoOutput(true);

        byte[] out = body.getBytes(StandardCharsets.UTF_8);

        int length = out.length;

        http.setFixedLengthStreamingMode(length);
        http.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json; charset=UTF-8&quot;);

        if (credentials) {
            String encoded = Base64.getEncoder()
                    .encodeToString((username + &quot;:&quot; + password).getBytes(StandardCharsets.UTF_8));

            http.setRequestProperty(&quot;Authorization&quot;, &quot;Basic &quot; + encoded);
        }

        http.connect();

        OutputStream os = http.getOutputStream();
        os.write(out);
        os.close();
    }

    private void sleep(int time) {
        try {
            Thread.sleep(time);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

}
</code></pre>

<p>This test stress the machine generating prime numbers and recollect the CPU usage by Java and the System for send it to ElasTest. Now we will launch this test using Jenkins in ElasTest.</p>
<h5 class="small-subtitle">Jenkins <i class="fab fa-jenkins"></i></h5>

<pre><code class="groovy">node{
    elastest(surefireReportsPattern: '**/target/surefire-reports/TEST-*.xml', project: 'Jenkins Examples') {
        stage ('Executing Test') {
            echo 'Print env variables'
            sh 'env'
            echo 'Set up test environment'
            mvnHome = tool 'M3.3.9'
            echo 'Cloning repository'
            git 'https://github.com/elastest/demo-projects'
            echo 'Run test'
            sh &quot;cd ./custommetrics-test; '${mvnHome}/bin/mvn' -Dtest=CustomMetrics -B test&quot;
            step([$class: 'JUnitResultArchiver', testResults: '**/target/surefire-reports/TEST-*.xml'])

        }        
    }
}
</code></pre>

<p>If you using ElasTest with credential use the env variables when run the test:</p>
<ul>
<li><strong><code>CREDENTIALS_NAME</code></strong>: For the user name.</li>
<li><strong><code>CREDENTIALS_PASS</code></strong>: For the user password.</li>
</ul>
<p>For example: </p>
<pre><code class="groovy">...
sh &quot;cd ./custommetrics-test; export CREDENTIALS_NAME=elastest; CREDENTIALS_PASS=elastest; '${mvnHome}/bin/mvn' -Dtest=CustomMetrics -B test&quot;
...
</code></pre>

<p>Now go to create <strong><code>Pipeline</code></strong>, first open the create item, select name <strong><code>CustomMetrics</code></strong> and mark the <strong><code>Pipeline</code></strong> option:</p>
<div class="docs-gallery inline-block">
    <a data-fancybox="gallery-1" href="/docs/tutorials/images/custom-metrics/new-item.png"><img class="img-responsive img-wellcome" src="/docs/tutorials/images/custom-metrics/new-item.png"/></a>
</div>

<p>In this page you paste the previos <strong><code>Pipeline</code></strong>:</p>
<div class="docs-gallery inline-block">
    <a data-fancybox="gallery-1" href="/docs/tutorials/images/custom-metrics/create-pipeline.png"><img class="img-responsive img-wellcome" src="/docs/tutorials/images/custom-metrics/create-pipeline.png"/></a>
</div>

<p>When the Job is created, your select the <strong><code>Build Now</code></strong>:</p>
<div class="docs-gallery inline-block">
    <a data-fancybox="gallery-1" href="/docs/tutorials/images/custom-metrics/run-job.png"><img class="img-responsive img-wellcome" src="/docs/tutorials/images/custom-metrics/run-job.png"/></a>
</div>

<p>After the execution is finished. You see the TJob in ElasTest, now you click in the <strong><code>Settings</code></strong> button like show in the following image:</p>
<div class="docs-gallery inline-block">
    <a data-fancybox="gallery-1" href="/docs/tutorials/images/custom-metrics/result-TJob.png"><img class="img-responsive img-wellcome" src="/docs/tutorials/images/custom-metrics/result-TJob.png"/></a>
</div>

<p>Now you select the metrics that you like see and click in the <strong><code>Apply and Save</code></strong>:</p>
<div class="docs-gallery inline-block">
    <a data-fancybox="gallery-1" href="/docs/tutorials/images/custom-metrics/select-metrics.png"><img class="img-responsive img-wellcome" src="/docs/tutorials/images/custom-metrics/select-metrics.png"/></a>
</div>

<p>The metrics show in the <strong><code>TJob Monitoring</code></strong> section:</p>
<div class="docs-gallery inline-block">
    <a data-fancybox="gallery-1" href="/docs/tutorials/images/custom-metrics/show-metrics.png"><img class="img-responsive img-wellcome" src="/docs/tutorials/images/custom-metrics/show-metrics.png"/></a>
</div>
					
				      </div>
				    </div>
				    <footer>
<hr class="divider divider-100 divider-xs hr-lg-center-0 offset-xs-top-20 offset-sm-top-20 offset-md-top-20 offset-lg-top-20">
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../kubernetes/" class="btn btn-xs btn-primary float-right" title="Kubernetes">Next &raquo;<span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../using-ess-to-perform-security-checks/" class="btn btn-xs btn-primary" title="Using ESS to perform security checks"><span class="icon icon-circle-arrow-left"></span> &laquo; Prev</a>
      
    </div>
  


  
  
	  <a href="https://github.com/elastest/elastest.io-docs/blob/master/docs/tutorials/custom-metrics.md" class="fab fa-github offset-xxs-top-30"> Edit Documentation on GitHub</a>
  
</footer>
			  	  
				  </div>
				</div>
			</div>
		    </div>
		</div>
	</section>

  </div>
</div>

<!-- Gallery -->
<script src="//code.jquery.com/jquery-3.2.1.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js"></script>

<script>
var galleries = $('div.docs-gallery');
for (var i = 1; i <= galleries.length; i++) {
    $().fancybox({
    selector : '[data-fancybox="gallery-' + i + '"]',
    infobar : true,
    arrows : false,
    loop: false,
    protect: true,
    transitionEffect: 'slide',
    buttons : [
        'close'
    ],
    clickOutside : 'close',
    clickSlide   : 'close',
  });
}
</script>
