--- 
layout: default 
title: Elastest Documentation - Kubernetes 
active: documentation 
section-title: Documentation 
section-icon: mdi mdi-content-copy 
---
<script src="/js/jquery-3.1.1.min.js"></script>
<script src="/js/float-panel.js"></script>

<script type="text/javascript">
	/* Import docs theme css */
	$('head').append('<link rel="stylesheet" type="text/css" href="/css/theme_extra.css">');
	

	$( document).ready(function(){
		$('#menu-list').show();
	    $('li.subnav_drop').find('ul.subnav').hide();
	       $( ".subnav" ).find( "li:contains('Kubernetes')" ).each(function(i,e){
		  var currentElement = $(e);
		  currentElement.parent().css({"display":"block","visibility":"visible"}); //css("background-color","blue");
		  currentElement.css({"display":"block","visibility":"visible"});
	       });
	    $('li.subnav_drop').click(function(i,e) {  
	      $('li.subnav_drop').not(this).find('ul.subnav').hide();
	      $(this).find('ul.subnav').toggle();
	    }); 

	    var minHeight = $('#float-panel').outerHeight() + 100;	
						$('#doc-container').css('min-height', minHeight+'px');
	});
	   
	$( ".wy-nav-content" ).find( "li:contains('Kubernetes')" ).css('color','red');
 </script>

<div id="doc-container" class="container text-justify">
  <div class="holder range"> 
        <div id="float-panel" class="wy-grid-for-nav cell-xs-3 cell-md-3 cell-lg-2 float-panel" data-top="56">

          
          <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
            <div class="wy-menu wy-menu-vertical" role="navigation" aria-label="main navigation">
		<div id="site-menu-title">
			<h3 class="h5">Explore docs</h3>
			<hr class="divider hr-lg-left-0 bg-orange">    
		</div>
		<ul id="menu-list" class="current" hidden>
			
				
					<li><ul> 

    <li class="toctree-l1 ">
        <a class="" href="../..">What is ElasTest?</a>
        
    </li>

</ul></li>
				
			
				
					<li><ul> 
    
   
    <li class="subnav_drop"><span>Tutorials</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../../tutorials/getting-started/">Getting started</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../tutorials/e2e-testing/">E2E Testing in ElasTest</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../tutorials/using-browsers-in-elastest/">Using browsers in ElasTest</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../tutorials/using-eds-devices-for-iot/">Using EDS devices for IoT</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../tutorials/using-ems-to-build-tests-with-dynamic-info/">Using EMS to build tests with dynamic info</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../tutorials/using-ess-to-perform-security-checks/">Using ESS to perform security checks</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../tutorials/custom-metrics/">Custom metrics</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../tutorials/kubernetes/">Kubernetes</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../tutorials/ere-with-custom-code/">ERE with custom code</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../tutorials/using-ebs-to-perform-analytics/">Using EBS to perform analytics</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../tutorials/estimating-the-costs-of-tests-on-aws/">Estimating the costs of tests on AWS</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../tutorials/observability-for-5g-infrastructures/">Observability for 5G infrastructures</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../tutorials/ems/">EMS (show how specific visualizations for TJobs and ElasTest TSS work)</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../tutorials/qoe/">Measuring video quality for video streaming applications</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../tutorials/eoe/">Orchestration testing</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
				
			
				
					<li><ul> 
    
   
    <li class="subnav_drop"><span>Demos</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../../demos/api-testing/">API testing</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../demos/e2e-testing/">E2E testing</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../demos/functional-exploratory-testing/">Functional / Exploratory testing</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../demos/multi-configuration/">Multi-configuration</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../demos/load-testing-with-aws/">Load testing with AWS</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../demos/cross-browser-testing/">Cross browser testing</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../demos/security-testing/">Security testing</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../demos/chaos-testing/">Chaos testing</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../demos/qoe/">QoE testing</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../demos/test-recommendation/">Test recommendation</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../demos/test-cost-estimation/">Test cost estimation</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
				
			
				
					<li><ul> 
    
   
    <li class="subnav_drop"><span>Cheatsheet</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../../try-elastest/">Try ElasTest</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../testing/unit/">Run unit tests</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../testing/e2e-rest/">Run end2end tests</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../testing/sut/">Software under Test</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../testing/parameterized-tests/">Parameterized tests</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../testing/multi-configuration-tjobs/">Multi-Configuration TJobs</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../web-browsers/manual-browsers/">Launching Web Browsers on ElasTest</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../web-browsers/e2e-browser/">Run en2end tests with Web Browsers</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../web-browsers/outside-testing/">Testing with Web Browsers from outside ElasTest</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../log-analyzer/">Log Analyzer</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../executions-comparator/">Executions Comparator</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../testlink/">TestLink with ElasTest</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../monitoring/">Test Monitoring</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../monitoring/outside-elastest/">Monitoring outside Elastest</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../monitoring/custom/">Custom monitoring</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../jenkins/pipeline/">Pipeline Jobs</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../jenkins/freestyle/">Freestyle Jobs</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../roadmap/">Roadmap</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
				
			
				
					<li><ul> 
    
   
    <li class="subnav_drop"><span>Reference documentation</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../../testing/environment-variables/">Enviroment variables</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../test-services/ems/">Elastest Monitoring Service (EMS)</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../test-services/ece/">Elastest Cost Engine (ECE)</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../test-services/ere-trial/">Elastest Recommendation Egine (ERE)</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../test-services/ebs/">ElasTest BigData Service (EBS)</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../test-services/eds/">ElasTest Device impersonation Service (EDS - IoT)</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../test-services/ess/">ElasTest Security Service (ESS)</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
				
			
				
					<li><ul> 
    
   
    <li class="subnav_drop"><span>Deployment</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../ubuntu/">Linux Server</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../aws/">Amazon Web Services</a>
        
    </li>


        
             

    <li class="toctree-l1 current">
        <a class="current" href="./">Kubernetes</a>
        
         
        
    </li>


        
</li>
</ul>
    
</ul></li>
				
			
				
					<li><ul> 
    
   
    <li class="subnav_drop"><span>Management</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../../elastest-monitoring/">Monitoring ElasTest</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../manage-elastest/monitoring-containers/">Monitoring containers</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../../manage-elastest/manage-elasticsearch/">Monitoring ElasticSearch</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
				
			
				
					<li><ul> 

    <li class="toctree-l1 ">
        <a class="" href="../../releases/">Releases</a>
        
    </li>

</ul></li>
				
			
				
					<li><ul> 

    <li class="toctree-l1 ">
        <a class="" href="../../support/">Support</a>
        
    </li>

</ul></li>
				
			
		</ul>
            </div>
            &nbsp;
          </nav>
        </div>

	<section class="section-sm-41">
		<div class="shell">
		    <div class="range range-xs-right">
		        <div class="cell-xs-10 cell-sm-8 cell-md-9 cell-lg-10 cell-xl-12 text-md-left cell-lg-push-1 offset-lg-top-0">
			  
				<div class="wy-nav-content">
				  <div class="rst-content">
				   
				    <div role="main">
				      <div class="section">
					
					  <div class="range range-xs-left">
<div class="cell-xs-10 cell-lg-6 text-md-left inset-md-right-80 cell-lg-push-1 offset-top-50 offset-lg-top-0">
<h2 id="content" class="h1">Deploying ElasTest with Kubernetes</h2>
<div class="offset-top-30 offset-md-top-30">
</div>
</div>
</div>

<h3 class="small-subtitle">How to run ElasTest on K8s (EK mode)</h3>

<h5 id="get-the-elastest-manifests">Get the ElasTest Manifests</h5>
<ul>
<li><strong>Clone</strong> toolbox project    </li>
</ul>
<pre><code>git clone https://github.com/elastest/elastest-toolbox.git
</code></pre>

<p></p>

<ul>
<li><strong>Navigate</strong> to folder</li>
</ul>
<pre><code>cd elastest-toolbox/kubernetes/ek
</code></pre>

<h5 id="enable-security">Enable Security</h5>
<p>If you want to stablish credentials to access to ElasTest and its integrated services, follow these steps:</p>
<ul>
<li><strong>Set Jenkins and TestLink Credentials.</strong> Edit the file <strong><code>etm-deployment.yml</code></strong> and replace the value "none" in the variables <strong><code>ET_USER</code></strong> and <strong><code>ET_PASS</code></strong> for whatever you want.</li>
</ul>
<pre><code>- name: ET_USER
  value: XXXXXX
- name: ET_PASS
  value: YYYYYY
</code></pre>

<p></p>

<ul>
<li><strong>Set ElasTest Credentials.</strong> Edit the file <em>"etm-proxy-deployment.yml"</em> and replace the value "none" in the variables <strong><code>ET_USER</code></strong> and <strong><code>ET_PASS</code></strong> for whatever you want.</li>
</ul>
<pre><code>- name: ET_USER
  value: XXXXXX
- name: ET_PASS
  value: YYYYYY
</code></pre>

<p></p>

<p>In addition, you have to set to true the variable <strong><code>ET_SECURITY</code></strong>.</p>
<pre><code>- name: ET_SECURITY
  value: &quot;true&quot;
</code></pre>

<h5 id="set-volume-size">Set volume size</h5>
<p>Volumes manifests have the default size set to a low value. It is recommended to set the size you want. To do this you must modify the files in the <code>elastest-toolbox/kubernetes/ek/volumes</code> folder.</p>
<h4 class="holder-subtitle link-top">Minikube</h4>

<p>It is possible that when you start with this mini tutorial, you don't have Minikube and the necessary tools installed. To know how to do this, please follow the steps in described in the official <a href="https://kubernetes.io/es/docs/tasks/tools/install-minikube/">site</a></p>
<h5 id="minikube-in-ubuntu-host-without-a-vm"><strong>Minikube in Ubuntu host (without a VM)</strong></h5>
<p>Run Minikube with this command in your local:</p>
<pre><code>sudo minikube start --memory=4098 --cpus=4 --vm-driver=none --apiserver-ips 127.0.0.1 --apiserver-name localhost --extra-config=kubelet.resolv-conf=/run/systemd/resolve/resolv.conf --extra-config=apiserver.service-node-port-range=1000-60000
</code></pre>

<h6 id="deploy-elastest">Deploy ElasTest</h6>
<pre><code>kubectl create -f . -f volumes/
</code></pre>

<p><strong>Note:</strong> <strong><code>-f volumes</code></strong> it’s only necessary first time, but there is no problem if it is used at another time, although error messages will be output*</p>
<h5 id="minikube-in-vm"><strong>Minikube in VM</strong></h5>
<p>Run Minikube with this command in your local:</p>
<pre><code>sudo minikube start --memory=6048 --cpus=4 --extra-config=apiserver.service-node-port-range=1000-60000 --extra-config kubelet.node-ip=VM-IP
</code></pre>

<h6 id="deploy-elastest_1">Deploy ElasTest</h6>
<ul>
<li>
<p>Set the Public Node IP in ElasTest
Edit the file <strong><code>etm-deployment.yml</code></strong> and update this environment variable with the VM IP:</p>
<pre><code>- name: ET_PUBLIC_HOST
  value: VM IP
</code></pre>
</li>
<li>
<p>Start ElasTest</p>
<pre><code>kubectl create -f . -f volumes/
</code></pre>
<p><strong>Note:</strong> <strong><code>-f volumes</code></strong> it’s only necessary first time, but there is no problem if it is used at another time, although error messages will be output*</p>
</li>
</ul>
<h5 id="how-to-access">How to access</h5>
<ul>
<li>Execute <strong><code>sudo minikube ip</code></strong> to get the cluster ip.</li>
<li>Open your browser and navigate to http://<em>CLUSTER-IP</em>:37000</li>
</ul>
<h4 class="holder-subtitle link-top">AWS</h4>

<p>If you want to deploy ElasTest on a k8s cluster in AWS (in a single node), you will need to do something else before executing the command to start ElasTest on k8s.</p>
<h5 id="cluster-configuration">Cluster Configuration</h5>
<ul>
<li>Extend default NodePort range 
Add this line <strong><code>--service-node-port-range=1000-40000</code></strong> to the file <strong><code>/etc/kubernetes/manifests/kube-apiserver.yaml</code></strong>.</li>
</ul>
<pre><code>apiVersion: v1
kind: Pod
metadata:
creationTimestamp: null
labels:
    component: kube-apiserver
    tier: control-plane
name: kube-apiserver
namespace: kube-system
spec:
containers:
- command:
    - kube-apiserver
    - --advertise-address=10.1.47.54
    ……
    - --service-node-port-range=1000-40000
</code></pre>

<h5 id="deploy-elastest_2">Deploy ElasTest</h5>
<ul>
<li>
<p>Set the Public Node IP in ElasTest
Edit the file <strong><code>etm-deployment.yml</code></strong> and update this environment variable with the public ip for the node in AWS:</p>
<pre><code>- name: ET_PUBLIC_HOST
  value: AWS Public Node IP
</code></pre>
</li>
<li>
<p>Start ElasTest</p>
<pre><code>kubectl create -f . -f volumes/
</code></pre>
<p><strong>Note:</strong> <strong><code>-f volumes</code></strong> it’s only necessary first time, but there is no problem if it is used at another time, although error messages will be output*</p>
</li>
</ul>
<h5 id="how-to-access_1">How to access</h5>
<ul>
<li>Use the <strong>AWS public IP</strong> as your cluster IP.</li>
<li>Open your browser and navigate to http://<em>CLUSTER-IP</em>:37000</li>
</ul>
<h6 id="how-to-stop">How to stop:</h6>
<pre><code>kubectl delete -f .
</code></pre>

<p><strong>Note:</strong> don't include the volumes folder if you don't want to lose the elastest data, as the volumes will be deleted</p>
					
				      </div>
				    </div>
				    <footer>
<hr class="divider divider-100 divider-xs hr-lg-center-0 offset-xs-top-20 offset-sm-top-20 offset-md-top-20 offset-lg-top-20">
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../elastest-monitoring/" class="btn btn-xs btn-primary float-right" title="Monitoring ElasTest">Next &raquo;<span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../aws/" class="btn btn-xs btn-primary" title="Amazon Web Services"><span class="icon icon-circle-arrow-left"></span> &laquo; Prev</a>
      
    </div>
  


  
  
	  <a href="https://github.com/elastest/elastest.io-docs/blob/master/docs/deploying/kubernetes.md" class="fab fa-github offset-xxs-top-30"> Edit Documentation on GitHub</a>
  
</footer>
			  	  
				  </div>
				</div>
			</div>
		    </div>
		</div>
	</section>

  </div>
</div>

<!-- Gallery -->
<script src="//code.jquery.com/jquery-3.2.1.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js"></script>

<script>
var galleries = $('div.docs-gallery');
for (var i = 1; i <= galleries.length; i++) {
    $().fancybox({
    selector : '[data-fancybox="gallery-' + i + '"]',
    infobar : true,
    arrows : false,
    loop: false,
    protect: true,
    transitionEffect: 'slide',
    buttons : [
        'close'
    ],
    clickOutside : 'close',
    clickSlide   : 'close',
  });
}
</script>
